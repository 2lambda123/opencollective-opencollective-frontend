import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import ProcessExpenseButtons from '../../components/expenses/ProcessExpenseButtons';
import { webpackCollective } from '../mocks/collectives';
import ToastProvider from '../../components/ToastProvider';
import { UserContext } from '../../components/UserProvider';
import { loggedInUser } from '../mocks/loggedInUser';

<Meta title="Expenses/ProcessExpenseButtons" component={ProcessExpenseButtons} />

<Canvas>
  <Story name="All buttons">
    {() => {
      return (
        <UserContext.Provider value={{ LoggedInUser: loggedInUser, loadingLoggedInUser: false }}>
          <ToastProvider>
            <ProcessExpenseButtons
              expense={{ legacyId: 42, amount: 4200 }}
              collective={webpackCollective}
              permissions={{
                approve: true,
                canApprove: true,
                canUnapprove: true,
                canReject: true,
                canPay: true,
                canMarkAsUnpaid: true,
              }}
            />
          </ToastProvider>
        </UserContext.Provider>
      );
    }}
  </Story>
</Canvas>

<Canvas>
  <Story name="Displayed buttons is based on the permissions">
    {() => {
      return (
        <UserContext.Provider value={{ LoggedInUser: loggedInUser, loadingLoggedInUser: false }}>
          <ToastProvider>
            <ProcessExpenseButtons
              expense={{ legacyId: 42, amount: 4200 }}
              collective={webpackCollective}
              permissions={{
                approve: true,
                canApprove: true,
                canReject: true,
              }}
            />
          </ToastProvider>
        </UserContext.Provider>
      );
    }}
  </Story>
</Canvas>
